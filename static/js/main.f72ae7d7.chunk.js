(this.webpackJsonpeventful=this.webpackJsonpeventful||[]).push([[0],{55:function(e,t,n){},76:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(22),i=n.n(s),c=(n(55),n(12)),o=n(13),l=n(18),d=n(17),u=(n(56),n(34)),h=n.n(u),j=n(47),b=n(35),v=n.n(b),p="https://bootcamp-week14-eventful.herokuapp.com/",m=function(){function e(t,n){Object(c.a)(this,e),this.tokenProvider=t,this.logoutHandler=n}return Object(o.a)(e,[{key:"authenticatedApiFetch",value:function(e,t,n){var a=this;return v()({method:e,url:t,headers:{authorization:this.tokenProvider()},data:n}).catch((function(e){if(403===e.response.status)return a.logoutHandler(),Promise.reject();throw e}))}},{key:"getEvent",value:function(){return this.authenticatedApiFetch("get",p)}},{key:"addEvent",value:function(e,t,n,a,r){return this.authenticatedApiFetch("post",p,{name:e,location:t,description:n,date:a,time:r})}},{key:"removeEvent",value:function(e){return this.authenticatedApiFetch("delete","".concat(p).concat(e))}},{key:"updateEvent",value:function(e,t,n,a,r,s){return this.authenticatedApiFetch("put","".concat(p).concat(e),{name:t,location:n,description:a,date:r,time:s})}},{key:"login",value:function(){var e=Object(j.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"post",url:"".concat(p,"auth"),data:{username:t,password:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),x=(n(76),n(6)),O=n(23),f=n(7),g=n(2),k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={disabled:!1},a}return Object(o.a)(n,[{key:"cancelUpdate",value:function(){document.getElementById("add-event-form").reset(),this.props.refreshList(),this.props.history.push("/")}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),this.setState({disabled:!0}),(this.props.currentEvent?this.props.apiClient.updateEvent(this.props.currentEvent._id,e.target.eventName.value,e.target.eventLocation.value,e.target.eventDescription.value,e.target.eventDate.value,e.target.eventTime.value):this.props.apiClient.addEvent(e.target.eventName.value,e.target.eventLocation.value,e.target.eventDescription.value,e.target.eventDate.value,e.target.eventTime.value)).then((function(){t.setState({disabled:!1}),document.getElementById("add-event-form").reset(),t.props.refreshList(),t.props.history.push("/")})).catch((function(){console.log("Catch error!"),alert("An error occurred, please try again."),t.setState({disabled:!1})}))}},{key:"render",value:function(){var e,t,n,a,r,s=this;return Object(g.jsx)("div",{children:Object(g.jsxs)(x.a,{className:"w-25 mx-auto text-center pt-4",id:"add-event-form",onSubmit:function(e){return s.submitHandler(e)},children:[Object(g.jsx)("h1",{children:this.props.currentEvent?"Update event":"Add new event"}),Object(g.jsxs)(x.a.Group,{controlId:"eventName",children:[Object(g.jsx)(x.a.Label,{children:"Name:"}),Object(g.jsx)(x.a.Control,{type:"text",placeholder:"Enter event name",className:"mb-3",defaultValue:null===(e=this.props.currentEvent)||void 0===e?void 0:e.name,name:"eventName",disabled:this.state.disabled,required:!0})]}),Object(g.jsxs)(x.a.Group,{controlId:"eventLocation",children:[Object(g.jsx)(x.a.Label,{children:"Location:"}),Object(g.jsx)(x.a.Control,{type:"text",placeholder:"Enter event location",className:"mb-3",defaultValue:null===(t=this.props.currentEvent)||void 0===t?void 0:t.location,name:"eventLocation",disabled:this.state.disabled,required:!0})]}),Object(g.jsxs)(x.a.Group,{controlId:"eventDescription",children:[Object(g.jsx)(x.a.Label,{children:"Description:"}),Object(g.jsx)(x.a.Control,{type:"text",placeholder:"Enter event description",className:"mb-3",defaultValue:null===(n=this.props.currentEvent)||void 0===n?void 0:n.description,name:"eventDescription",disabled:this.state.disabled,required:!0})]}),Object(g.jsxs)(x.a.Group,{controlId:"eventDate",children:[Object(g.jsx)(x.a.Label,{children:"Date:"}),Object(g.jsx)(x.a.Control,{type:"date",placeholder:"Enter event date",className:"mb-3",defaultValue:null===(a=this.props.currentEvent)||void 0===a?void 0:a.date,name:"eventDate",disabled:this.state.disabled,required:!0})]}),Object(g.jsxs)(x.a.Group,{controlId:"eventTime",children:[Object(g.jsx)(x.a.Label,{children:"Time:"}),Object(g.jsx)(x.a.Control,{type:"time",placeholder:"Enter event time",className:"mb-3",defaultValue:null===(r=this.props.currentEvent)||void 0===r?void 0:r.time,name:"eventTime",disabled:this.state.disabled,required:!0})]}),Object(g.jsx)(O.a,{variant:"success",type:"submit",className:"mx-2",disabled:this.state.disabled,children:"Submit"}),Object(g.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(){return s.cancelUpdate()},disabled:this.state.disabled,children:"Cancel"})]})})}}]),n}(r.a.Component),y=Object(f.f)(k),E=n(21),N=n(29),C=n(49),w=n(50),L=n(20),S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={events:[],currentEvent:void 0},a}return Object(o.a)(n,[{key:"refreshList",value:function(){var e=this;this.props.apiClient.getEvent().then((function(t){return e.setState({events:t.data})}))}},{key:"removeEvent",value:function(e){var t=this;this.props.apiClient.removeEvent(e).then((function(){return t.refreshList()}))}},{key:"updateEvent",value:function(e){this.setState({currentEvent:e})}},{key:"componentDidMount",value:function(){this.refreshList()}},{key:"buildRows",value:function(){var e=this;return this.state.events.map((function(t){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"table-width-15",children:t.name}),Object(g.jsx)("td",{className:"table-width-15",children:t.location}),Object(g.jsx)("td",{className:"table-width-35",children:t.description}),Object(g.jsx)("td",{className:"table-width-10",children:t.date}),Object(g.jsx)("td",{className:"table-width-10",children:t.time}),Object(g.jsxs)("td",{className:"table-width-15",children:[Object(g.jsx)(L.b,{to:"/add",className:"text-decoration-none",children:Object(g.jsx)("span",{className:"action-link update mx-2",onClick:function(){return e.updateEvent(t)},children:"Update"})}),Object(g.jsx)("span",{className:"action-link remove mx-2",onClick:function(){return e.removeEvent(t._id)},children:"Remove"})]})]},t._id)}))}},{key:"render",value:function(){var e=this;return Object(g.jsxs)(L.a,{children:[Object(g.jsxs)(E.a,{bg:"dark",variant:"dark",children:[Object(g.jsx)(E.a.Brand,{className:"mx-5",children:"Eventful"}),Object(g.jsx)(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(g.jsxs)(E.a.Collapse,{id:"basic-navbar-nav",children:[Object(g.jsxs)(N.a,{children:[Object(g.jsx)(L.b,{to:"/",className:"nav-link text-danger px-3",children:"View Events"}),Object(g.jsx)(L.b,{to:"/add",className:"nav-link text-danger px-3",children:"Add New Event"})]}),Object(g.jsx)(N.a,{className:"m-auto"}),Object(g.jsx)(N.a,{children:Object(g.jsx)(L.b,{to:"/",className:"ml-auto nav-link text-danger px-5",onClick:function(){return e.props.apiClient.logoutHandler()},children:"Logout"})})]})]}),Object(g.jsx)(C.a,{children:Object(g.jsxs)(f.c,{children:[Object(g.jsx)(f.a,{path:"/add",children:Object(g.jsx)(y,{apiClient:this.props.apiClient,refreshList:function(){e.refreshList(),e.setState({currentEvent:void 0})},currentEvent:this.state.currentEvent})}),Object(g.jsx)(f.a,{exact:!0,path:"/",children:Object(g.jsxs)("div",{className:"mx-auto text-center pt-4",children:[Object(g.jsx)("h1",{children:"My Events"}),this.state.events.length?Object(g.jsxs)(w.a,{striped:!0,bordered:!0,hover:!0,id:"events-table",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"Event Name"}),Object(g.jsx)("th",{children:"Location"}),Object(g.jsx)("th",{children:"Description"}),Object(g.jsx)("th",{children:"Date"}),Object(g.jsx)("th",{children:"Time"}),Object(g.jsx)("th",{children:"Actions"})]})}),Object(g.jsx)("tbody",{children:this.buildRows()})]}):Object(g.jsxs)("div",{className:"mt-4",children:["Sorry, you have no events yet."," ",Object(g.jsx)(L.b,{to:"/add",children:"Try adding one!"})]})]})}),Object(g.jsx)(f.a,{path:"/",children:"Error: 404 not found"})]})})]})}}]),n}(r.a.Component),I=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={disabled:!1},a}return Object(o.a)(n,[{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),this.setState({disabled:!0}),this.props.apiClient.login(e.target.formUsername.value,e.target.formPassword.value).then((function(e){t.setState({disabled:!1}),t.props.loggedIn(e.data.token)})).catch((function(e){401===e.response.status?alert("You have entered an invalid username or password."):alert(e),t.setState({disabled:!1})}))}},{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{children:[Object(g.jsx)(E.a,{bg:"dark",variant:"dark",children:Object(g.jsx)(E.a.Brand,{className:"mx-5",children:"Eventful"})}),Object(g.jsx)("div",{className:"w-25 m-auto text-center pt-4",children:Object(g.jsxs)(x.a,{onSubmit:function(t){return e.submitHandler(t)},children:[Object(g.jsx)("h1",{children:"Log In"}),Object(g.jsxs)(x.a.Group,{controlId:"formUsername",className:"pt-4",children:[Object(g.jsx)(x.a.Label,{children:"Username:"}),Object(g.jsx)(x.a.Control,{type:"username",placeholder:"Enter username",required:!0})]}),Object(g.jsxs)(x.a.Group,{controlId:"formPassword",className:"py-4",children:[Object(g.jsx)(x.a.Label,{children:"Password:"}),Object(g.jsx)(x.a.Control,{type:"password",placeholder:"Enter password",required:!0})]}),Object(g.jsx)(O.a,{variant:"primary",type:"submit",children:"Submit"})]})})]})}}]),n}(r.a.Component),D=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={token:window.localStorage.getItem("token")},a.apiClient=new m((function(){return a.state.token}),(function(){return a.logout()})),a}return Object(o.a)(n,[{key:"login",value:function(e){window.localStorage.setItem("token",e),this.setState({token:e})}},{key:"logout",value:function(){window.localStorage.removeItem("token"),this.setState({token:void 0})}},{key:"render",value:function(){var e=this;return this.state.token?Object(g.jsx)(S,{apiClient:this.apiClient}):Object(g.jsx)(I,{loggedIn:function(t){return e.login(t)},apiClient:this.apiClient})}}]),n}(r.a.Component),T=function(){return Object(g.jsx)("div",{children:Object(g.jsx)(D,{})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(T,{})}),document.getElementById("root")),A()}},[[84,1,2]]]);
//# sourceMappingURL=main.f72ae7d7.chunk.js.map